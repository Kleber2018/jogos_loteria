 <main class="main-container">
  <section class="section-fechamento">
    <section class="sub-section-fechamento">

      <section class="section-fechamento">
        <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
            <h2 style="padding: 8px; margin: 24px 0px; text-align: center; font-weight: bolder;">Calculadora para motagem de fechamento de jogos da Mega-Sena</h2>
        </section>
        <section style="display: flex; justify-content: center; align-self: center; width: 100%;" >
          <img src="../assets/logo-mega-sena-512.png"  alt="Logo lotomania" width="200" style="margin: -10px 0px 0px">
        </section>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
        <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
          <p style="padding: 8px; margin: 8px 0px; text-align: center; ">Utilizar fechamento de jogos da loteria aumenta as chances de acerto em prêmios secundários, tornando o bolão de jogos mais eficiente e estratégico.</p>
          
          <p style="padding: 8px; margin: 4px 0px; text-align: center; font-weight: bolder;">Nessa calculadora de jogos você consegue: </p>
          <div class="container-logo-text" style="width: 100%; justify-content: center;">
            <div class="container-logo-text">
              <mat-icon fontIcon="arrow_right"></mat-icon>
              <p style="padding: 4px; margin: 0px 0px 0px; text-align: center;  align-self: center;"> Escolher até 14 números para montar o fechamento;</p>
            </div>
          </div>
          <div class="container-logo-text" style="width: 100%; justify-content: center;">
            <div class="container-logo-text">
              <mat-icon fontIcon="arrow_right"></mat-icon>
              <p style="padding: 4px; margin: 0px 0px 0px; text-align: center;  align-self: center;">Escolher a quantidade de números por volante de apostas;</p>
            </div>
          </div>
          <div class="container-logo-text" style="width: 100%; justify-content: center;">
            <div class="container-logo-text">
              <mat-icon fontIcon="arrow_right"></mat-icon>
              <p style="padding: 4px; margin: 0px 0px 0px; text-align: center;  align-self: center;">Escolher a quantidade de acertos que deseja garantir;</p>
            </div>
          </div>
          <div class="container-logo-text" style="width: 100%; justify-content: center;">
            <div class="container-logo-text">
              <mat-icon fontIcon="arrow_right"></mat-icon>
              <p style="padding: 4px; margin: 0px 0px 0px; text-align: center;  align-self: center;">Escolher o número de cotas para ter o valor do bolão por cota;</p>
            </div>
          </div>
          <div class="container-logo-text" style="width: 100%; justify-content: center;">
            <div class="container-logo-text">
              <mat-icon fontIcon="arrow_right"></mat-icon>
              <p style="padding: 4px; margin: 0px 0px 0px; text-align: center;  align-self: center;">Escolher os números ou pedir uma sugestão de jogo.</p>
            </div>
          </div>
        </section>

        <mat-divider style="width: 100%; margin-top: 24px;"></mat-divider>
        <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
          <p style="padding: 8px; margin: 8px 0px; text-align: center; width: 100%; ">Então vamos ao jogo</p>
          <p style="padding: 8px; margin: 8px 0px; text-align: center; font-weight: bolder; width: 100%; ">Primeiro escolha os seus números da sorte</p>

          <p style="text-align: center; color: rgb(100, 100, 100); ">Se preferir você pode pedir para o sistema te sugerir uma sequencia de números da sorte, utilizando com base os resultados dos concursos de 2024 e 2025</p>
        </section>

       
        <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
          <button
            style="margin: 10px;"
            matSuffix
            mat-stroked-button 
            (click)="gerarJogoNovamente(9)">
            9 números
          </button>
          <button
            style="margin: 10px;"
            matSuffix
            mat-stroked-button 
            (click)="gerarJogoNovamente(10)">
            10 números
          </button>
          <button
            style="margin: 10px;"
            matSuffix
            mat-stroked-button 
            (click)="gerarJogoNovamente(11)">
            11 números
          </button>
          <button
            style="margin: 10px;"
            matSuffix
            mat-stroked-button 
            (click)="gerarJogoNovamente(12)">
            12 números
          </button>
          <button
            style="margin: 10px;"
            matSuffix
            mat-stroked-button 
            (click)="gerarJogoNovamente(13)">
            13 números
          </button>
          <button
            style="margin: 10px;"
            matSuffix
            mat-stroked-button 
            (click)="gerarJogoNovamente(14)">
            14 números
          </button>
        </section>
        <form [formGroup]="formNumerosSelecionados" (ngSubmit)="submitCalcularFechamento()" >
          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
            <p style="padding: 8px; margin: 8px 0px; text-align: center; font-weight: bolder; width: 100%; ">Esses são os seus números da sorte:</p>
            <p style="text-align: center; color: rgb(100, 100, 100); ">Você pode alterar os números da maneira que quiser</p>
          </section>
          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;"  >
            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              required="true"
              min="0" max="60" 
              formControlName="n1" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              required="true"
              formControlName="n2" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              required="true"
              formControlName="n3" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              required="true"
              formControlName="n4" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              required="true"
              formControlName="n5" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              required="true"
              formControlName="n6" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              formControlName="n7" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              formControlName="n8" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              formControlName="n9" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              formControlName="n10" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              formControlName="n11" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              formControlName="n12" />
            </mat-form-field>

            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              formControlName="n13" />
            </mat-form-field>
            <mat-form-field class="form-input" appearance="outline">
              <input
              matInput
              type="number"
              min="0" max="60"
              formControlName="n14" />
            </mat-form-field>
          </section>
          
          
          <mat-divider style="width: 100%; margin-top: 24px;"></mat-divider>

          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
            <p style="padding: 8px; margin: 8px 0px; text-align: center; width: 100%; ">Configurações do bolão</p>
            <p style="padding: 4px; margin: 8px 0px; text-align: center; font-weight: bolder; width: 100%; ">Escolha a quantidade de números que vai ser marcado nos volantes:</p>
            <p style="text-align: center; color: rgb(100, 100, 100); margin: 4px;">Você pode escolher cartela entre 6 e 11 números</p>
            <p style="text-align: center; color: rgb(100, 100, 100); margin: 4px; width: 100%;">Recomendação de menor custo: jogo de 6 números</p>
            <p style="text-align: center; color: rgb(100, 100, 100); margin: 4px; padding-bottom: 16px;">Recomendação para bolões: Jogo de 7 números, para conseguir gerar as cotas com recibos separados</p>
          </section>
          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;"  >
            <mat-form-field appearance="outline">
              <mat-label>Números Cartela</mat-label>
              <input
              matInput
              type="number"
              required="true"
              min="6" max="11" 
              formControlName="tamanhoJogo" />
            </mat-form-field>
          </section>

          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
            <p style="padding: 4px; margin: 8px 0px; text-align: center; font-weight: bolder; width: 100%; ">Escolha a garantia de acertos do fechamento:</p>
            <p style="text-align: center; color: rgb(100, 100, 100); margin: 4px; width: 100%">Quanto maior a garantia de acertos, maior vai ser a quantidade de combinações necessárias</p>
                      <p style="text-align: center; color: rgb(100, 100, 100); margin: 4px; padding-bottom: 16px;">O algoritimo garante aproximadamente 99% de chance de acerto se essa quantidade de números estiver na sequencia de números selecionados</p>
          </section>

          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;"  >
            <mat-form-field  appearance="outline">
              <mat-label>Quantidade minima de de acertos</mat-label>
              <input
              matInput
              type="number"
              min="2" max="5"
              required="true"
              formControlName="acertos" />
            </mat-form-field>
          </section>

          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
            <p style="padding: 4px; margin: 8px 0px; text-align: center; font-weight: bolder; width: 100%; ">Escolha a quantidade de cotas do bolão:</p>
            <p style="text-align: center; color: rgb(100, 100, 100); margin: 4px; padding-bottom: 16px;">Para auxiliar no cálculo do valor de cada cota do bolão</p>
          </section>

          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;"  >
            <mat-form-field  appearance="outline">
              <mat-label>Quantidade de cotas do bolão</mat-label>
              <input
              matInput
              type="number"
              min="1" max="100"
              required="true"
              formControlName="cotas" />
            </mat-form-field>
          </section>

          <mat-divider style="width: 100%; margin: 24px 0px 12px;"></mat-divider>

          <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;"  >
            <div>
              <button
              style="margin: 10px;"
              type="submit"
              matSuffix
              mat-stroked-button 
              [disabled]="formNumerosSelecionados.invalid" cdkFocusInitial>
              Gerar Fechamento
            </button>

            </div>
          </section>
        </form>
      </section>

    </section>
    <mat-divider style="width: 100%; margin: 8px 0px;"></mat-divider>
    <section class="section-fechamento" *ngIf="fechamentos">
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
        <p style="padding: 8px; margin: 8px 0px; text-align: center; width: 100%; ">O seu fechamento</p>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
        <div style="padding: 8px; margin: 8px 0px; text-align: center;" *ngFor="let numGerado of numerosGerados;  let i = index">
          <p *ngIf="i == 0">( {{numGerado}}</p>
          <p *ngIf="(i !== (numerosGerados.length-1)) && i!== 0">{{numGerado}},</p>
          <p *ngIf="i == (numerosGerados.length-1)">{{numGerado}} )</p>
        </div>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
          <p style="padding: 8px; margin: 0px; text-align: center">Com esse fechamento de {{numeros.length}} números e com garantia de pelo menos {{garantirAcertos}} acertos, você vai precisar fazer <b>{{fechamentos.length}} jogos </b> de {{tamanhoJogo}} números</p>
      </section>
    </section>

    <section class="section-fechamento" *ngIf="fechamentos">
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
          <p style="padding: 8px; margin: 0px;">O custo total do bolão vai ser de <b>R$ {{valorTotalBolao}},00</b>, dividido por <b>{{qtdCotas}} cotas</b> com o valor por cota de <b>R$ {{valorPorCota}} reais </b></p>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" >
        <p style="padding: 8px; margin: 0px;">Com base nos ultimos {{resultadosUltimos2024.length}} jogos de 2024 você teria acertado {{totalQuadras}} quadras, {{totalQuinas}} quinas, {{totalSenas}} senas</p>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" *ngIf="probabilidade !== 0">
        <p style="padding: 8px; margin: 0px;"> A probabilidade de você acertar  {{garantirAcertos}} números entre os escolhidos é de 1 para {{probabilidade}}</p>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" *ngIf="msgErroCotas">
        <span style="padding: 8px; margin: 0px; color: brown;">{{msgErroCotas}}</span>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" *ngIf="msgErroCotas2">
        <span style="padding: 8px; margin: 0px; color: brown;">{{msgErroCotas2}}</span>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;" *ngIf="msgErroCotas3" >
        <span style="padding: 8px; margin: 0px; color: brown;">{{msgErroCotas3}}</span>
      </section>
    </section>

    <!-- <section class="section-fechamento" *ngIf="fechamentos">
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;"  *ngFor="let fechamento of fechamentos">
        <div *ngFor="let f of fechamento">
          <p style="padding: 8px; margin: 0px;">{{f}}</p>
        </div>

      </section>
    </section> -->

    <section class="section-fechamento" style="margin-top: 32px;" *ngIf="resultadosJogos">
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;"  *ngFor="let resultJogo of resultadosJogos">
        <div *ngFor="let res of resultJogo.jogo">
          <p style="padding: 8px; margin: 0px;">{{res}}</p>
        </div>
        <p style="padding: 8px; margin: 0px; color: grey;">({{resultJogo.quadras}} {{resultJogo.quinas}} {{resultJogo.senas}})</p>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap;">
        <p style="padding: 8px; margin: 0px; color: grey; margin-top: 24px; text-align: center">(quadras quinas senas) que seriam feitas nos {{resultadosUltimos2024.length}} jogos de 2024</p>
      </section>
    </section>


    

    <mat-divider style="width: 100%; margin: 54px 0px 54px;"></mat-divider>
    <section class="section-fechamento">
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap; margin: 8px 0px 0px 0px; " >
          <p style="padding: 4px; margin: 4px 0px 4px 0px; color: rgb(85, 85, 85);">Atualização 04/04/25 - outras informações em </p>
          <a  style="padding: 4px 0px; margin: 4px 0px 4px 0px; color: rgb(85, 85, 85);" href="https://loterias.caixa.gov.br/Paginas/Mega-Sena.aspx" target="_blank" rel="noopener noreferrer">Loterias Caixa</a>
          <p style="padding: 4px; margin: 4px 0px 4px 0px; color: rgb(85, 85, 85);">| Desenvolvido por KLRS</p>
      </section>
      <section style="display: flex; justify-content: center; align-self: center; flex-wrap: wrap; margin: 8px 0px 40px 0px; " >
        <p style="padding: 4px; margin: 4px 0px 4px 0px; color: rgb(85, 85, 85); text-align: center">A estratégia de fechamentos de jogos é uma abordagem econômica para aumentar as chances de ganhar prêmios secundários. Para otimizar a quantidade de apostas, o algoritmo pode excluir algumas combinações.</p>
    </section>
    </section>

     

  </section>

  </main>